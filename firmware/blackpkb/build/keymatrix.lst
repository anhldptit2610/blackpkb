ARM GAS  /tmp/ccJVvLtv.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"keymatrix.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.keymatrix_is_key_pressed,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	keymatrix_is_key_pressed:
  26              	.LVL0:
  27              	.LFB139:
  28              		.file 1 "Core/Src/keymatrix.c"
   1:Core/Src/keymatrix.c **** #include "keymatrix.h"
   2:Core/Src/keymatrix.c **** #include "usb_device.h"
   3:Core/Src/keymatrix.c **** #include "usbd_hid.h"
   4:Core/Src/keymatrix.c **** #include "main.h"
   5:Core/Src/keymatrix.c **** 
   6:Core/Src/keymatrix.c **** typedef struct {
   7:Core/Src/keymatrix.c ****     GPIO_TypeDef *port;
   8:Core/Src/keymatrix.c ****     uint16_t pin;
   9:Core/Src/keymatrix.c ****     bool oldState;
  10:Core/Src/keymatrix.c ****     bool newState;
  11:Core/Src/keymatrix.c **** } macropad_key_t;
  12:Core/Src/keymatrix.c **** 
  13:Core/Src/keymatrix.c **** #define UP      1
  14:Core/Src/keymatrix.c **** #define DOWN    0
  15:Core/Src/keymatrix.c **** 
  16:Core/Src/keymatrix.c **** macropad_key_t keymatrix[KEYMATRIX_ROW][KEYMATRIX_COL];
  17:Core/Src/keymatrix.c **** key_report_t report;
  18:Core/Src/keymatrix.c **** extern USBD_HandleTypeDef hUsbDeviceFS;
  19:Core/Src/keymatrix.c **** 
  20:Core/Src/keymatrix.c **** static void keymatrix_pull_col(int col, bool upDown)
  21:Core/Src/keymatrix.c **** {
  22:Core/Src/keymatrix.c ****     switch (col) {
  23:Core/Src/keymatrix.c ****     case 1:
  24:Core/Src/keymatrix.c ****         HAL_GPIO_WritePin(COL_1_GPIO_Port, COL_1_Pin, upDown); 
  25:Core/Src/keymatrix.c ****         break;
  26:Core/Src/keymatrix.c ****     case 2:
  27:Core/Src/keymatrix.c ****         HAL_GPIO_WritePin(COL_2_GPIO_Port, COL_2_Pin, upDown); 
  28:Core/Src/keymatrix.c ****         break;
  29:Core/Src/keymatrix.c ****     case 3:
  30:Core/Src/keymatrix.c ****         HAL_GPIO_WritePin(COL_3_GPIO_Port, COL_3_Pin, upDown); 
ARM GAS  /tmp/ccJVvLtv.s 			page 2


  31:Core/Src/keymatrix.c ****         break;
  32:Core/Src/keymatrix.c ****     default:
  33:Core/Src/keymatrix.c ****         break;
  34:Core/Src/keymatrix.c ****     }
  35:Core/Src/keymatrix.c **** }
  36:Core/Src/keymatrix.c **** 
  37:Core/Src/keymatrix.c **** static bool keymatrix_is_key_pressed(int row, int col)
  38:Core/Src/keymatrix.c **** {
  29              		.loc 1 38 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 38 1 is_stmt 0 view .LVU1
  34 0000 10B5     		push	{r4, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 14, -4
  39:Core/Src/keymatrix.c ****     keymatrix[row][col].oldState = keymatrix[row][col].newState; 
  39              		.loc 1 39 5 is_stmt 1 view .LVU2
  40              		.loc 1 39 55 is_stmt 0 view .LVU3
  41 0002 0C4B     		ldr	r3, .L6
  42 0004 00EB4000 		add	r0, r0, r0, lsl #1
  43              	.LVL1:
  44              		.loc 1 39 55 view .LVU4
  45 0008 0844     		add	r0, r0, r1
  46 000a 03EBC004 		add	r4, r3, r0, lsl #3
  47 000e E279     		ldrb	r2, [r4, #7]	@ zero_extendqisi2
  48              		.loc 1 39 34 view .LVU5
  49 0010 A271     		strb	r2, [r4, #6]
  40:Core/Src/keymatrix.c ****     keymatrix[row][col].newState = HAL_GPIO_ReadPin(keymatrix[row][col].port, keymatrix[row][col].p
  50              		.loc 1 40 5 is_stmt 1 view .LVU6
  51              		.loc 1 40 36 is_stmt 0 view .LVU7
  52 0012 A188     		ldrh	r1, [r4, #4]
  53              	.LVL2:
  54              		.loc 1 40 36 view .LVU8
  55 0014 53F83000 		ldr	r0, [r3, r0, lsl #3]
  56 0018 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  57              	.LVL3:
  58 001c 0038     		subs	r0, r0, #0
  59 001e 18BF     		it	ne
  60 0020 0120     		movne	r0, #1
  61              		.loc 1 40 34 view .LVU9
  62 0022 E071     		strb	r0, [r4, #7]
  41:Core/Src/keymatrix.c ****     return (!keymatrix[row][col].oldState && keymatrix[row][col].newState);
  63              		.loc 1 41 5 is_stmt 1 view .LVU10
  64              		.loc 1 41 33 is_stmt 0 view .LVU11
  65 0024 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
  66              		.loc 1 41 43 view .LVU12
  67 0026 13B9     		cbnz	r3, .L3
  68              		.loc 1 41 43 discriminator 1 view .LVU13
  69 0028 10B1     		cbz	r0, .L2
  70              		.loc 1 41 43 view .LVU14
  71 002a 0120     		movs	r0, #1
  72 002c 00E0     		b	.L2
  73              	.L3:
  74 002e 0020     		movs	r0, #0
ARM GAS  /tmp/ccJVvLtv.s 			page 3


  75              	.L2:
  42:Core/Src/keymatrix.c **** }
  76              		.loc 1 42 1 discriminator 6 view .LVU15
  77 0030 10BD     		pop	{r4, pc}
  78              	.L7:
  79 0032 00BF     		.align	2
  80              	.L6:
  81 0034 00000000 		.word	.LANCHOR0
  82              		.cfi_endproc
  83              	.LFE139:
  85              		.section	.text.keymatrix_pull_col,"ax",%progbits
  86              		.align	1
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  90              		.fpu fpv4-sp-d16
  92              	keymatrix_pull_col:
  93              	.LVL4:
  94              	.LFB138:
  21:Core/Src/keymatrix.c ****     switch (col) {
  95              		.loc 1 21 1 is_stmt 1 view -0
  96              		.cfi_startproc
  97              		@ args = 0, pretend = 0, frame = 0
  98              		@ frame_needed = 0, uses_anonymous_args = 0
  21:Core/Src/keymatrix.c ****     switch (col) {
  99              		.loc 1 21 1 is_stmt 0 view .LVU17
 100 0000 08B5     		push	{r3, lr}
 101              	.LCFI1:
 102              		.cfi_def_cfa_offset 8
 103              		.cfi_offset 3, -8
 104              		.cfi_offset 14, -4
 105 0002 0A46     		mov	r2, r1
  22:Core/Src/keymatrix.c ****     case 1:
 106              		.loc 1 22 5 is_stmt 1 view .LVU18
 107 0004 0228     		cmp	r0, #2
 108 0006 0AD0     		beq	.L9
 109 0008 0328     		cmp	r0, #3
 110 000a 0ED0     		beq	.L10
 111 000c 0128     		cmp	r0, #1
 112 000e 00D0     		beq	.L13
 113              	.LVL5:
 114              	.L8:
  35:Core/Src/keymatrix.c **** 
 115              		.loc 1 35 1 is_stmt 0 view .LVU19
 116 0010 08BD     		pop	{r3, pc}
 117              	.LVL6:
 118              	.L13:
  24:Core/Src/keymatrix.c ****         break;
 119              		.loc 1 24 9 is_stmt 1 view .LVU20
 120 0012 4FF48051 		mov	r1, #4096
 121              	.LVL7:
  24:Core/Src/keymatrix.c ****         break;
 122              		.loc 1 24 9 is_stmt 0 view .LVU21
 123 0016 0848     		ldr	r0, .L14
 124              	.LVL8:
  24:Core/Src/keymatrix.c ****         break;
 125              		.loc 1 24 9 view .LVU22
ARM GAS  /tmp/ccJVvLtv.s 			page 4


 126 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 127              	.LVL9:
  25:Core/Src/keymatrix.c ****     case 2:
 128              		.loc 1 25 9 is_stmt 1 view .LVU23
 129 001c F8E7     		b	.L8
 130              	.LVL10:
 131              	.L9:
  27:Core/Src/keymatrix.c ****         break;
 132              		.loc 1 27 9 view .LVU24
 133 001e 4FF40051 		mov	r1, #8192
 134              	.LVL11:
  27:Core/Src/keymatrix.c ****         break;
 135              		.loc 1 27 9 is_stmt 0 view .LVU25
 136 0022 0548     		ldr	r0, .L14
 137              	.LVL12:
  27:Core/Src/keymatrix.c ****         break;
 138              		.loc 1 27 9 view .LVU26
 139 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 140              	.LVL13:
  28:Core/Src/keymatrix.c ****     case 3:
 141              		.loc 1 28 9 is_stmt 1 view .LVU27
 142 0028 F2E7     		b	.L8
 143              	.LVL14:
 144              	.L10:
  30:Core/Src/keymatrix.c ****         break;
 145              		.loc 1 30 9 view .LVU28
 146 002a 4FF48041 		mov	r1, #16384
 147              	.LVL15:
  30:Core/Src/keymatrix.c ****         break;
 148              		.loc 1 30 9 is_stmt 0 view .LVU29
 149 002e 0248     		ldr	r0, .L14
 150              	.LVL16:
  30:Core/Src/keymatrix.c ****         break;
 151              		.loc 1 30 9 view .LVU30
 152 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 153              	.LVL17:
  31:Core/Src/keymatrix.c ****     default:
 154              		.loc 1 31 9 is_stmt 1 view .LVU31
  35:Core/Src/keymatrix.c **** 
 155              		.loc 1 35 1 is_stmt 0 view .LVU32
 156 0034 ECE7     		b	.L8
 157              	.L15:
 158 0036 00BF     		.align	2
 159              	.L14:
 160 0038 00040240 		.word	1073873920
 161              		.cfi_endproc
 162              	.LFE138:
 164              		.section	.text.keymatrix_send_key,"ax",%progbits
 165              		.align	1
 166              		.global	keymatrix_send_key
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	keymatrix_send_key:
 173              	.LVL18:
 174              	.LFB140:
ARM GAS  /tmp/ccJVvLtv.s 			page 5


  43:Core/Src/keymatrix.c **** 
  44:Core/Src/keymatrix.c **** void keymatrix_send_key(uint8_t modifier, uint8_t key)
  45:Core/Src/keymatrix.c **** {
 175              		.loc 1 45 1 is_stmt 1 view -0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
 179              		.loc 1 45 1 is_stmt 0 view .LVU34
 180 0000 38B5     		push	{r3, r4, r5, lr}
 181              	.LCFI2:
 182              		.cfi_def_cfa_offset 16
 183              		.cfi_offset 3, -16
 184              		.cfi_offset 4, -12
 185              		.cfi_offset 5, -8
 186              		.cfi_offset 14, -4
  46:Core/Src/keymatrix.c ****     report.modifier = modifier;
 187              		.loc 1 46 5 is_stmt 1 view .LVU35
 188              		.loc 1 46 21 is_stmt 0 view .LVU36
 189 0002 0A4C     		ldr	r4, .L18
 190 0004 6070     		strb	r0, [r4, #1]
  47:Core/Src/keymatrix.c ****     report.key1 = key;
 191              		.loc 1 47 5 is_stmt 1 view .LVU37
 192              		.loc 1 47 17 is_stmt 0 view .LVU38
 193 0006 E170     		strb	r1, [r4, #3]
  48:Core/Src/keymatrix.c ****     USBD_HID_SendReport(&hUsbDeviceFS, report.instance, 8);
 194              		.loc 1 48 5 is_stmt 1 view .LVU39
 195 0008 094D     		ldr	r5, .L18+4
 196 000a 0822     		movs	r2, #8
 197 000c 2146     		mov	r1, r4
 198              	.LVL19:
 199              		.loc 1 48 5 is_stmt 0 view .LVU40
 200 000e 2846     		mov	r0, r5
 201              	.LVL20:
 202              		.loc 1 48 5 view .LVU41
 203 0010 FFF7FEFF 		bl	USBD_HID_SendReport
 204              	.LVL21:
  49:Core/Src/keymatrix.c ****     HAL_Delay(20);
 205              		.loc 1 49 5 is_stmt 1 view .LVU42
 206 0014 1420     		movs	r0, #20
 207 0016 FFF7FEFF 		bl	HAL_Delay
 208              	.LVL22:
  50:Core/Src/keymatrix.c ****     report.modifier = 0x00;
 209              		.loc 1 50 5 view .LVU43
 210              		.loc 1 50 21 is_stmt 0 view .LVU44
 211 001a 0023     		movs	r3, #0
 212 001c 6370     		strb	r3, [r4, #1]
  51:Core/Src/keymatrix.c ****     report.key1 = 0x00;
 213              		.loc 1 51 5 is_stmt 1 view .LVU45
 214              		.loc 1 51 17 is_stmt 0 view .LVU46
 215 001e E370     		strb	r3, [r4, #3]
  52:Core/Src/keymatrix.c ****     USBD_HID_SendReport(&hUsbDeviceFS, report.instance, 8);
 216              		.loc 1 52 5 is_stmt 1 view .LVU47
 217 0020 0822     		movs	r2, #8
 218 0022 2146     		mov	r1, r4
 219 0024 2846     		mov	r0, r5
 220 0026 FFF7FEFF 		bl	USBD_HID_SendReport
 221              	.LVL23:
ARM GAS  /tmp/ccJVvLtv.s 			page 6


  53:Core/Src/keymatrix.c **** }
 222              		.loc 1 53 1 is_stmt 0 view .LVU48
 223 002a 38BD     		pop	{r3, r4, r5, pc}
 224              	.L19:
 225              		.align	2
 226              	.L18:
 227 002c 00000000 		.word	.LANCHOR1
 228 0030 00000000 		.word	hUsbDeviceFS
 229              		.cfi_endproc
 230              	.LFE140:
 232              		.section	.text.keymatrix_scan,"ax",%progbits
 233              		.align	1
 234              		.global	keymatrix_scan
 235              		.syntax unified
 236              		.thumb
 237              		.thumb_func
 238              		.fpu fpv4-sp-d16
 240              	keymatrix_scan:
 241              	.LVL24:
 242              	.LFB141:
  54:Core/Src/keymatrix.c **** 
  55:Core/Src/keymatrix.c **** void keymatrix_scan(bool keymatrix[KEYMATRIX_ROW][KEYMATRIX_COL])
  56:Core/Src/keymatrix.c **** {
 243              		.loc 1 56 1 is_stmt 1 view -0
 244              		.cfi_startproc
 245              		@ args = 0, pretend = 0, frame = 0
 246              		@ frame_needed = 0, uses_anonymous_args = 0
 247              		.loc 1 56 1 is_stmt 0 view .LVU50
 248 0000 10B5     		push	{r4, lr}
 249              	.LCFI3:
 250              		.cfi_def_cfa_offset 8
 251              		.cfi_offset 4, -8
 252              		.cfi_offset 14, -4
 253 0002 0446     		mov	r4, r0
  57:Core/Src/keymatrix.c ****     keymatrix_pull_col(1, UP);
 254              		.loc 1 57 5 is_stmt 1 view .LVU51
 255 0004 0121     		movs	r1, #1
 256 0006 0846     		mov	r0, r1
 257              	.LVL25:
 258              		.loc 1 57 5 is_stmt 0 view .LVU52
 259 0008 FFF7FEFF 		bl	keymatrix_pull_col
 260              	.LVL26:
  58:Core/Src/keymatrix.c ****     keymatrix[0][0] = keymatrix_is_key_pressed(0, 0);
 261              		.loc 1 58 5 is_stmt 1 view .LVU53
 262              		.loc 1 58 23 is_stmt 0 view .LVU54
 263 000c 0021     		movs	r1, #0
 264 000e 0846     		mov	r0, r1
 265 0010 FFF7FEFF 		bl	keymatrix_is_key_pressed
 266              	.LVL27:
 267              		.loc 1 58 21 view .LVU55
 268 0014 2070     		strb	r0, [r4]
  59:Core/Src/keymatrix.c ****     keymatrix[1][0] = keymatrix_is_key_pressed(1, 0);
 269              		.loc 1 59 5 is_stmt 1 view .LVU56
 270              		.loc 1 59 23 is_stmt 0 view .LVU57
 271 0016 0021     		movs	r1, #0
 272 0018 0120     		movs	r0, #1
 273 001a FFF7FEFF 		bl	keymatrix_is_key_pressed
ARM GAS  /tmp/ccJVvLtv.s 			page 7


 274              	.LVL28:
 275              		.loc 1 59 21 view .LVU58
 276 001e E070     		strb	r0, [r4, #3]
  60:Core/Src/keymatrix.c ****     keymatrix_pull_col(1, DOWN);
 277              		.loc 1 60 5 is_stmt 1 view .LVU59
 278 0020 0021     		movs	r1, #0
 279 0022 0120     		movs	r0, #1
 280 0024 FFF7FEFF 		bl	keymatrix_pull_col
 281              	.LVL29:
  61:Core/Src/keymatrix.c ****     keymatrix_pull_col(2, UP);
 282              		.loc 1 61 5 view .LVU60
 283 0028 0121     		movs	r1, #1
 284 002a 0220     		movs	r0, #2
 285 002c FFF7FEFF 		bl	keymatrix_pull_col
 286              	.LVL30:
  62:Core/Src/keymatrix.c ****     keymatrix[0][1] = keymatrix_is_key_pressed(0, 1);
 287              		.loc 1 62 5 view .LVU61
 288              		.loc 1 62 23 is_stmt 0 view .LVU62
 289 0030 0121     		movs	r1, #1
 290 0032 0020     		movs	r0, #0
 291 0034 FFF7FEFF 		bl	keymatrix_is_key_pressed
 292              	.LVL31:
 293              		.loc 1 62 21 view .LVU63
 294 0038 6070     		strb	r0, [r4, #1]
  63:Core/Src/keymatrix.c ****     keymatrix[1][1] = keymatrix_is_key_pressed(1, 1);
 295              		.loc 1 63 5 is_stmt 1 view .LVU64
 296              		.loc 1 63 23 is_stmt 0 view .LVU65
 297 003a 0121     		movs	r1, #1
 298 003c 0846     		mov	r0, r1
 299 003e FFF7FEFF 		bl	keymatrix_is_key_pressed
 300              	.LVL32:
 301              		.loc 1 63 21 view .LVU66
 302 0042 2071     		strb	r0, [r4, #4]
  64:Core/Src/keymatrix.c ****     keymatrix_pull_col(2, DOWN);
 303              		.loc 1 64 5 is_stmt 1 view .LVU67
 304 0044 0021     		movs	r1, #0
 305 0046 0220     		movs	r0, #2
 306 0048 FFF7FEFF 		bl	keymatrix_pull_col
 307              	.LVL33:
  65:Core/Src/keymatrix.c ****     keymatrix_pull_col(3, UP);
 308              		.loc 1 65 5 view .LVU68
 309 004c 0121     		movs	r1, #1
 310 004e 0320     		movs	r0, #3
 311 0050 FFF7FEFF 		bl	keymatrix_pull_col
 312              	.LVL34:
  66:Core/Src/keymatrix.c ****     keymatrix[0][2] = keymatrix_is_key_pressed(0, 2);
 313              		.loc 1 66 5 view .LVU69
 314              		.loc 1 66 23 is_stmt 0 view .LVU70
 315 0054 0221     		movs	r1, #2
 316 0056 0020     		movs	r0, #0
 317 0058 FFF7FEFF 		bl	keymatrix_is_key_pressed
 318              	.LVL35:
 319              		.loc 1 66 21 view .LVU71
 320 005c A070     		strb	r0, [r4, #2]
  67:Core/Src/keymatrix.c ****     keymatrix[1][2] = keymatrix_is_key_pressed(1, 2);
 321              		.loc 1 67 5 is_stmt 1 view .LVU72
 322              		.loc 1 67 23 is_stmt 0 view .LVU73
ARM GAS  /tmp/ccJVvLtv.s 			page 8


 323 005e 0221     		movs	r1, #2
 324 0060 0120     		movs	r0, #1
 325 0062 FFF7FEFF 		bl	keymatrix_is_key_pressed
 326              	.LVL36:
 327              		.loc 1 67 21 view .LVU74
 328 0066 6071     		strb	r0, [r4, #5]
  68:Core/Src/keymatrix.c ****     keymatrix_pull_col(3, DOWN);
 329              		.loc 1 68 5 is_stmt 1 view .LVU75
 330 0068 0021     		movs	r1, #0
 331 006a 0320     		movs	r0, #3
 332 006c FFF7FEFF 		bl	keymatrix_pull_col
 333              	.LVL37:
  69:Core/Src/keymatrix.c **** }
 334              		.loc 1 69 1 is_stmt 0 view .LVU76
 335 0070 10BD     		pop	{r4, pc}
 336              		.loc 1 69 1 view .LVU77
 337              		.cfi_endproc
 338              	.LFE141:
 340              		.section	.text.keymatrix_init,"ax",%progbits
 341              		.align	1
 342              		.global	keymatrix_init
 343              		.syntax unified
 344              		.thumb
 345              		.thumb_func
 346              		.fpu fpv4-sp-d16
 348              	keymatrix_init:
 349              	.LFB142:
  70:Core/Src/keymatrix.c **** 
  71:Core/Src/keymatrix.c **** void keymatrix_init(void)
  72:Core/Src/keymatrix.c **** {
 350              		.loc 1 72 1 is_stmt 1 view -0
 351              		.cfi_startproc
 352              		@ args = 0, pretend = 0, frame = 0
 353              		@ frame_needed = 0, uses_anonymous_args = 0
 354              		@ link register save eliminated.
  73:Core/Src/keymatrix.c ****     keymatrix[0][0].port = keymatrix[0][1].port = keymatrix[0][2].port = ROW_1_GPIO_Port;
 355              		.loc 1 73 5 view .LVU79
 356              		.loc 1 73 72 is_stmt 0 view .LVU80
 357 0000 174B     		ldr	r3, .L28
 358 0002 184A     		ldr	r2, .L28+4
 359 0004 1A61     		str	r2, [r3, #16]
 360              		.loc 1 73 49 view .LVU81
 361 0006 9A60     		str	r2, [r3, #8]
 362              		.loc 1 73 26 view .LVU82
 363 0008 1A60     		str	r2, [r3]
  74:Core/Src/keymatrix.c ****     keymatrix[1][0].port = keymatrix[1][1].port = keymatrix[1][2].port = ROW_2_GPIO_Port;
 364              		.loc 1 74 5 is_stmt 1 view .LVU83
 365              		.loc 1 74 72 is_stmt 0 view .LVU84
 366 000a 9A62     		str	r2, [r3, #40]
 367              		.loc 1 74 49 view .LVU85
 368 000c 1A62     		str	r2, [r3, #32]
 369              		.loc 1 74 26 view .LVU86
 370 000e 9A61     		str	r2, [r3, #24]
  75:Core/Src/keymatrix.c ****     keymatrix[0][0].pin = keymatrix[0][1].pin = keymatrix[0][2].pin = ROW_1_Pin;
 371              		.loc 1 75 5 is_stmt 1 view .LVU87
 372              		.loc 1 75 69 is_stmt 0 view .LVU88
 373 0010 0822     		movs	r2, #8
ARM GAS  /tmp/ccJVvLtv.s 			page 9


 374 0012 9A82     		strh	r2, [r3, #20]	@ movhi
 375              		.loc 1 75 47 view .LVU89
 376 0014 9A81     		strh	r2, [r3, #12]	@ movhi
 377              		.loc 1 75 25 view .LVU90
 378 0016 9A80     		strh	r2, [r3, #4]	@ movhi
  76:Core/Src/keymatrix.c ****     keymatrix[1][0].pin = keymatrix[1][1].pin = keymatrix[1][2].pin = ROW_2_Pin;
 379              		.loc 1 76 5 is_stmt 1 view .LVU91
 380              		.loc 1 76 69 is_stmt 0 view .LVU92
 381 0018 1022     		movs	r2, #16
 382 001a 9A85     		strh	r2, [r3, #44]	@ movhi
 383              		.loc 1 76 47 view .LVU93
 384 001c 9A84     		strh	r2, [r3, #36]	@ movhi
 385              		.loc 1 76 25 view .LVU94
 386 001e 9A83     		strh	r2, [r3, #28]	@ movhi
  77:Core/Src/keymatrix.c **** 
  78:Core/Src/keymatrix.c ****     for (int i = 0; i < KEYMATRIX_ROW; i++)
 387              		.loc 1 78 5 is_stmt 1 view .LVU95
 388              	.LBB2:
 389              		.loc 1 78 10 view .LVU96
 390              	.LVL38:
 391              		.loc 1 78 14 is_stmt 0 view .LVU97
 392 0020 0020     		movs	r0, #0
 393              		.loc 1 78 5 view .LVU98
 394 0022 0CE0     		b	.L23
 395              	.LVL39:
 396              	.L24:
 397              	.LBB3:
  79:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
  80:Core/Src/keymatrix.c ****             keymatrix[i][j].newState = keymatrix[i][j].oldState = 0;
 398              		.loc 1 80 13 is_stmt 1 discriminator 3 view .LVU99
 399              		.loc 1 80 65 is_stmt 0 discriminator 3 view .LVU100
 400 0024 00EB4003 		add	r3, r0, r0, lsl #1
 401 0028 9918     		adds	r1, r3, r2
 402 002a 0D4B     		ldr	r3, .L28
 403 002c 03EBC103 		add	r3, r3, r1, lsl #3
 404 0030 0021     		movs	r1, #0
 405 0032 9971     		strb	r1, [r3, #6]
 406              		.loc 1 80 38 discriminator 3 view .LVU101
 407 0034 D971     		strb	r1, [r3, #7]
  79:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 408              		.loc 1 79 44 is_stmt 1 discriminator 3 view .LVU102
  79:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 409              		.loc 1 79 45 is_stmt 0 discriminator 3 view .LVU103
 410 0036 0132     		adds	r2, r2, #1
 411              	.LVL40:
 412              	.L25:
  79:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 413              		.loc 1 79 25 is_stmt 1 discriminator 1 view .LVU104
  79:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 414              		.loc 1 79 9 is_stmt 0 discriminator 1 view .LVU105
 415 0038 022A     		cmp	r2, #2
 416 003a F3DD     		ble	.L24
 417              	.LBE3:
  78:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 418              		.loc 1 78 40 is_stmt 1 discriminator 2 view .LVU106
  78:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 419              		.loc 1 78 41 is_stmt 0 discriminator 2 view .LVU107
ARM GAS  /tmp/ccJVvLtv.s 			page 10


 420 003c 0130     		adds	r0, r0, #1
 421              	.LVL41:
 422              	.L23:
  78:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 423              		.loc 1 78 21 is_stmt 1 discriminator 1 view .LVU108
  78:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 424              		.loc 1 78 5 is_stmt 0 discriminator 1 view .LVU109
 425 003e 0128     		cmp	r0, #1
 426 0040 01DC     		bgt	.L27
 427              	.LBB4:
  79:Core/Src/keymatrix.c ****         for (int j = 0; j < KEYMATRIX_COL; j++)
 428              		.loc 1 79 18 view .LVU110
 429 0042 0022     		movs	r2, #0
 430 0044 F8E7     		b	.L25
 431              	.L27:
 432              	.LBE4:
 433              	.LBE2:
  81:Core/Src/keymatrix.c **** 
  82:Core/Src/keymatrix.c ****     report.reportID = 1;  // report ID
 434              		.loc 1 82 5 is_stmt 1 view .LVU111
 435              		.loc 1 82 21 is_stmt 0 view .LVU112
 436 0046 084B     		ldr	r3, .L28+8
 437 0048 0122     		movs	r2, #1
 438 004a 1A70     		strb	r2, [r3]
  83:Core/Src/keymatrix.c ****     report.modifier = 0;  // modifier
 439              		.loc 1 83 5 is_stmt 1 view .LVU113
 440              		.loc 1 83 21 is_stmt 0 view .LVU114
 441 004c 0022     		movs	r2, #0
 442 004e 5A70     		strb	r2, [r3, #1]
  84:Core/Src/keymatrix.c ****     report.reserved = 0;  // reserved
 443              		.loc 1 84 5 is_stmt 1 view .LVU115
 444              		.loc 1 84 21 is_stmt 0 view .LVU116
 445 0050 9A70     		strb	r2, [r3, #2]
  85:Core/Src/keymatrix.c ****     report.key1 = 0;
 446              		.loc 1 85 5 is_stmt 1 view .LVU117
 447              		.loc 1 85 17 is_stmt 0 view .LVU118
 448 0052 DA70     		strb	r2, [r3, #3]
  86:Core/Src/keymatrix.c ****     report.key2 = 0;
 449              		.loc 1 86 5 is_stmt 1 view .LVU119
 450              		.loc 1 86 17 is_stmt 0 view .LVU120
 451 0054 1A71     		strb	r2, [r3, #4]
  87:Core/Src/keymatrix.c ****     report.key3 = 0;
 452              		.loc 1 87 5 is_stmt 1 view .LVU121
 453              		.loc 1 87 17 is_stmt 0 view .LVU122
 454 0056 5A71     		strb	r2, [r3, #5]
  88:Core/Src/keymatrix.c ****     report.key4 = 0;
 455              		.loc 1 88 5 is_stmt 1 view .LVU123
 456              		.loc 1 88 17 is_stmt 0 view .LVU124
 457 0058 9A71     		strb	r2, [r3, #6]
  89:Core/Src/keymatrix.c ****     report.key5 = 0;
 458              		.loc 1 89 5 is_stmt 1 view .LVU125
 459              		.loc 1 89 17 is_stmt 0 view .LVU126
 460 005a DA71     		strb	r2, [r3, #7]
  90:Core/Src/keymatrix.c **** }...
 461              		.loc 1 90 1 view .LVU127
 462 005c 7047     		bx	lr
 463              	.L29:
ARM GAS  /tmp/ccJVvLtv.s 			page 11


 464 005e 00BF     		.align	2
 465              	.L28:
 466 0060 00000000 		.word	.LANCHOR0
 467 0064 00040240 		.word	1073873920
 468 0068 00000000 		.word	.LANCHOR1
 469              		.cfi_endproc
 470              	.LFE142:
 472              		.global	report
 473              		.global	keymatrix
 474              		.section	.bss.keymatrix,"aw",%nobits
 475              		.align	2
 476              		.set	.LANCHOR0,. + 0
 479              	keymatrix:
 480 0000 00000000 		.space	48
 480      00000000 
 480      00000000 
 480      00000000 
 480      00000000 
 481              		.section	.bss.report,"aw",%nobits
 482              		.align	2
 483              		.set	.LANCHOR1,. + 0
 486              	report:
 487 0000 00000000 		.space	8
 487      00000000 
 488              		.text
 489              	.Letext0:
 490              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 491              		.file 3 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f411xe.h"
 492              		.file 4 "Core/Inc/keymatrix.h"
 493              		.file 5 "Middlewares/ST/STM32_USB_Device_Library/Core/Inc/usbd_def.h"
 494              		.file 6 "Middlewares/ST/STM32_USB_Device_Library/Class/HID/Inc/usbd_hid.h"
 495              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 496              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
ARM GAS  /tmp/ccJVvLtv.s 			page 12


DEFINED SYMBOLS
                            *ABS*:0000000000000000 keymatrix.c
     /tmp/ccJVvLtv.s:18     .text.keymatrix_is_key_pressed:0000000000000000 $t
     /tmp/ccJVvLtv.s:25     .text.keymatrix_is_key_pressed:0000000000000000 keymatrix_is_key_pressed
     /tmp/ccJVvLtv.s:81     .text.keymatrix_is_key_pressed:0000000000000034 $d
     /tmp/ccJVvLtv.s:86     .text.keymatrix_pull_col:0000000000000000 $t
     /tmp/ccJVvLtv.s:92     .text.keymatrix_pull_col:0000000000000000 keymatrix_pull_col
     /tmp/ccJVvLtv.s:160    .text.keymatrix_pull_col:0000000000000038 $d
     /tmp/ccJVvLtv.s:165    .text.keymatrix_send_key:0000000000000000 $t
     /tmp/ccJVvLtv.s:172    .text.keymatrix_send_key:0000000000000000 keymatrix_send_key
     /tmp/ccJVvLtv.s:227    .text.keymatrix_send_key:000000000000002c $d
     /tmp/ccJVvLtv.s:233    .text.keymatrix_scan:0000000000000000 $t
     /tmp/ccJVvLtv.s:240    .text.keymatrix_scan:0000000000000000 keymatrix_scan
     /tmp/ccJVvLtv.s:341    .text.keymatrix_init:0000000000000000 $t
     /tmp/ccJVvLtv.s:348    .text.keymatrix_init:0000000000000000 keymatrix_init
     /tmp/ccJVvLtv.s:466    .text.keymatrix_init:0000000000000060 $d
     /tmp/ccJVvLtv.s:486    .bss.report:0000000000000000 report
     /tmp/ccJVvLtv.s:479    .bss.keymatrix:0000000000000000 keymatrix
     /tmp/ccJVvLtv.s:475    .bss.keymatrix:0000000000000000 $d
     /tmp/ccJVvLtv.s:482    .bss.report:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_ReadPin
HAL_GPIO_WritePin
USBD_HID_SendReport
HAL_Delay
hUsbDeviceFS
